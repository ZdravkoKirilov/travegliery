(self.webpackChunkgoatzilla=self.webpackChunkgoatzilla||[]).push([[317],{5317:(t,e,r)=>{"use strict";r.r(e),r.d(e,{ProjectDataService:()=>C,ProjectsModule:()=>H,ProjectsService:()=>v});var a=r(6266),i=r(3810),n=r(6006),o=r(5917),s=r(8002);function c(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function p(t){c(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function g(t){return c(1,arguments),p(t).getTime()<Date.now()}var d=r(7716),l=r(6215);function m(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function u(t,e){c(2,arguments);var r=p(t),a=m(e);return isNaN(a)?new Date(NaN):a?(r.setDate(r.getDate()+a),r):r}function h(t,e){c(2,arguments);var r=m(e);return u(t,-r)}const f=new Date,Z={1:{id:"1",name:"Project 1",image:"",start:h(f,55).toUTCString(),end:u(f,25).toUTCString()},2:{id:"2",name:"Project 2",image:"",start:h(f,55).toUTCString(),end:h(f,5).toUTCString()},3:{id:"3",name:"Project 3",image:"",start:h(f,55).toUTCString(),end:u(f,5).toUTCString()}};let v=(()=>{class t{constructor(t){this.appRouter=t,this.projects$=new l.X(Z)}getProjects(){return this.projects$.asObservable().pipe((0,s.U)(t=>Object.values(t)))}getActiveProject(){const t=this.appRouter.getProjectId();return this.projects$.asObservable().pipe((0,s.U)(e=>e[t]))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(i.So))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const T=function(t){return[t]};function j(t,e){if(1&t&&(d.TgZ(0,"div",9),d.TgZ(1,"h2",10),d._uU(2),d.qZA(),d.TgZ(3,"div",11),d.TgZ(4,"span"),d._uU(5),d.ALo(6,"date"),d.qZA(),d._uU(7," - "),d.TgZ(8,"span"),d._uU(9),d.ALo(10,"date"),d.qZA(),d.qZA(),d.TgZ(11,"div"),d.TgZ(12,"a",12),d._uU(13,"Open"),d.qZA(),d.qZA(),d.qZA()),2&t){const t=e.$implicit;d.xp6(2),d.Oqu(t.name),d.xp6(3),d.Oqu(d.lcZ(6,4,t.start)),d.xp6(4),d.Oqu(d.lcZ(10,6,t.end)),d.xp6(3),d.Q6J("routerLink",d.VKq(8,T,t.id))}}function b(t,e){if(1&t&&(d.TgZ(0,"div",9),d.TgZ(1,"h2",10),d._uU(2),d.qZA(),d.TgZ(3,"div",11),d.TgZ(4,"span"),d._uU(5),d.ALo(6,"date"),d.qZA(),d._uU(7," - "),d.TgZ(8,"span"),d._uU(9),d.ALo(10,"date"),d.qZA(),d.qZA(),d.TgZ(11,"div"),d.TgZ(12,"a",12),d._uU(13,"Open"),d.qZA(),d.qZA(),d.qZA()),2&t){const t=e.$implicit;d.xp6(2),d.Oqu(t.name),d.xp6(3),d.Oqu(d.lcZ(6,4,t.start)),d.xp6(4),d.Oqu(d.lcZ(10,6,t.end)),d.xp6(3),d.Q6J("routerLink",d.VKq(8,T,t.id))}}let A=(()=>{class t{constructor(t){this.projectService=t,this.activeProjects$=(0,o.of)([]),this.pastProjects$=(0,o.of)([])}ngOnInit(){this.activeProjects$=this.projectService.getProjects().pipe((0,s.U)(t=>t.filter(t=>!g(new Date(t.end))))),this.pastProjects$=this.projectService.getProjects().pipe((0,s.U)(t=>t.filter(t=>g(new Date(t.end)))))}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(v))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-projects-list"]],decls:18,vars:6,consts:[[1,"centered-content","padded-container"],[1,"mb-2"],[1,"mb-2","mt-1","mobile-mb-1","main-heading","flex","align-center"],["key","notes","size","lg",1,"projects-icon"],[1,"h2","ml-1"],[1,"mb-4"],[1,"mb-2","h4","heading"],[1,"card-container","wrap"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"h5","mb-1"],[1,"mb-1","small-text","italic"],["cta","tertiary",3,"routerLink"]],template:function(t,e){1&t&&(d.TgZ(0,"article",0),d._UZ(1,"app-authenticated-header",1),d.TgZ(2,"div",2),d._UZ(3,"svg-icon",3),d.TgZ(4,"h1",4),d._uU(5,"Projects"),d.qZA(),d.qZA(),d.TgZ(6,"section",5),d.TgZ(7,"h2",6),d._uU(8,"Active"),d.qZA(),d.TgZ(9,"div",7),d.YNc(10,j,14,10,"div",8),d.ALo(11,"async"),d.qZA(),d.qZA(),d.TgZ(12,"section"),d.TgZ(13,"h2",6),d._uU(14,"Past"),d.qZA(),d.TgZ(15,"div",7),d.YNc(16,b,14,10,"div",8),d.ALo(17,"async"),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(10),d.Q6J("ngForOf",d.lcZ(11,2,e.activeProjects$)),d.xp6(6),d.Q6J("ngForOf",d.lcZ(17,4,e.pastProjects$)))},styles:["[_nghost-%COMP%]   .main-heading[_ngcontent-%COMP%]{padding:0 var(--space-1)}[_nghost-%COMP%]   .main-heading[_ngcontent-%COMP%]   .projects-icon[_ngcontent-%COMP%]{color:var(--secondary-color)}[_nghost-%COMP%]   .heading[_ngcontent-%COMP%]{padding:var(--space-1);border-radius:10px;background-color:var(--neutral-transparent-color)}@media (max-width:64em){[_nghost-%COMP%]   .heading[_ngcontent-%COMP%]{padding:var(--space-1);border-radius:0}[_nghost-%COMP%]   .card-container[_ngcontent-%COMP%]{padding:0 var(--space-1)}[_nghost-%COMP%]   .padded-content[_ngcontent-%COMP%]{padding-bottom:var(--space-2)}}"]}),t})();function U(t){c(1,arguments);var e=p(t);return e.setHours(0,0,0,0),e}function y(t,e){c(2,arguments);var r=U(t),a=U(e);return r.getTime()===a.getTime()}function k(t){return c(1,arguments),y(t,Date.now())}var P=r(739),q=r(5257),D=r(3190);function S(t,e){c(2,arguments);var r=p(t),a=p(e);return r.getTime()>a.getTime()}const _=new Date,B={1:{id:"1",projectId:"1",type:"flight",startDate:h(_,5).toUTCString(),startTime:"11:30",endDate:h(_,5).toUTCString(),endTime:"13:30",provider:"Austrian airlines",participants:["1","2","8"],from:"London - Heathrow",to:"Paris De Gaul",image:"assets/booking-images/flight1.jpg"},2:{id:"2",projectId:"1",type:"hotel",startDate:h(_,5).toUTCString(),startTime:"14:00",endDate:h(_,4).toUTCString(),endTime:"12:00",provider:"Sofia grand hotel",participants:["1","2","6"],city:"Sofia",address:"Tsar Osvoboditel 13",image:"assets/booking-images/hotel1.jpg"},3:{id:"3",projectId:"2",type:"ferry",startDate:h(_,3).toUTCString(),startTime:" 14:00",endDate:h(_,3).toUTCString(),endTime:"16:00",provider:"Sharky fella",participants:["5","7"],from:"Istanbul port 1",to:"Istanbul port 2",image:"assets/booking-images/ferry1.jpg"},4:{id:"4",projectId:"3",type:"train",startDate:_.toUTCString(),startTime:"09:00",endDate:_.toUTCString(),endTime:"19:00",provider:"Old Tomm",participants:["3","4","7"],from:"Moscow",to:"St Petersburg",image:"assets/booking-images/train1.jpg"},5:{id:"5",projectId:"1",type:"flight",startDate:_.toUTCString(),startTime:"11:30",endDate:_.toUTCString(),endTime:"13:25",provider:"Qatar airlines",participants:["1","2"],from:"London - Heathrow",to:"Paris De Gaul",image:"assets/booking-images/flight2.jpg"},6:{id:"6",projectId:"1",type:"flight",startDate:u(_,1).toUTCString(),startTime:"09:30",endDate:u(_,1).toUTCString(),endTime:"14:45",provider:"Qatar airlines",participants:["1","2"],from:"Vienna airport",to:"Qatar",image:"assets/booking-images/flight3.jpg"},7:{id:"7",projectId:"1",type:"train",startDate:u(_,1).toUTCString(),startTime:"09:30",endDate:u(_,2).toUTCString(),endTime:"11:00",provider:"Qatar train services",participants:["1","2"],from:"Qatar central station",to:"Bangalore",image:"assets/booking-images/train1.jpg"},8:{id:"8",projectId:"1",type:"ferry",startDate:u(_,3).toUTCString(),startTime:"09:30",endDate:u(_,3).toUTCString(),endTime:"22:00",provider:"Indian ferry services",participants:["1","2","3","4"],from:"Bangalore port",to:"New Zealand",image:"assets/booking-images/ferry2.jpg"},9:{id:"9",projectId:"1",type:"hotel",startDate:u(_,5).toUTCString(),startTime:"12:00",endDate:u(_,7).toUTCString(),endTime:"11:00",provider:"K West Hotel and Spa",participants:["1","2","3","4"],city:"London",address:"Richmond Way, London W14 0AX",image:"assets/booking-images/hotel4.jpg"}},N={1:{id:"1",projectId:"1",firstName:"John",lastName:"Simmons",email:"johns@gmail.com",phone:"447969899667",passportNumber:"123AB78H"},2:{id:"2",projectId:"1",firstName:"Jean",lastName:"Tennesy",email:"jeant@hotmail.com",phone:"441235995998",passportNumber:"123AB78H"},3:{id:"3",projectId:"3",firstName:"Eric",lastName:"Gartner",email:"ericg@hotmail.com",phone:"441229745677",passportNumber:"123AB78H"},4:{id:"4",projectId:"3",firstName:"Vanessa",lastName:"Hughes",email:"vanhughes@gmail.com",phone:"447969888777",passportNumber:"123AB78H"},5:{id:"5",projectId:"2",firstName:"Patrick",lastName:"Rothfuss",email:"nottodaypat@yahoo.com",phone:"447969844776",passportNumber:"123AB78H"},6:{id:"6",projectId:"2",firstName:"Patricia",lastName:"Gates",email:"patgates55@yahoo.com",phone:"447977158757",passportNumber:"123AB78H"},7:{id:"7",projectId:"3",firstName:"Ivan",lastName:"Orlov",email:"luckychicken@gmail.com",phone:"447989555444",passportNumber:"123AB78H"},8:{id:"8",projectId:"1",firstName:"Charlotte",lastName:"Baby",email:"cbaby@hotmail.com",phone:"447475332211",passportNumber:"123AB78H"},9:{id:"9",projectId:"1",firstName:"Jake",lastName:"Heart",email:"jakeh@hotmail.com",phone:"447798554669",passportNumber:"123AB78H"},10:{id:"10",projectId:"1",firstName:"Chloe",lastName:"Fartlec",email:"chloef@hotmail.com",phone:"447897457221",passportNumber:"123AB78H"}};let C=(()=>{class t{constructor(t,e){this.appRouter=t,this.projectService=e,this.participants$=new l.X(N),this.bookings$=new l.X(B),this._favoriteParticipants$=new l.X(["1"]),this.favoriteParticipants$=this._favoriteParticipants$.asObservable(),this.sortParticipantsByFavorites=t=>{const e=this._favoriteParticipants$.getValue();return[...t].sort((t,r)=>{const a=e.includes(t.id),i=e.includes(r.id);return a&&!i?-1:i&&!a?1:0})}}addToFavorites(t){return this.favoriteParticipants$.pipe((0,q.q)(1),(0,s.U)(e=>{const r=[...e,t];return this._favoriteParticipants$.next(r),r}))}removeFromFavorites(t){return this.favoriteParticipants$.pipe((0,q.q)(1),(0,s.U)(e=>{const r=e.filter(e=>e!==t);return this._favoriteParticipants$.next(r),r}))}getParticipants(){return(0,P.aj)([this.participants$,this.projectService.getActiveProject()]).pipe((0,s.U)(([t,e])=>Object.values(t).filter(t=>t.projectId===(null==e?void 0:e.id))),(0,s.U)(this.sortParticipantsByName),(0,s.U)(this.sortParticipantsByFavorites))}getBookingParticipants(t){return(0,P.aj)([this.getParticipants(),this.getBookingById(t)]).pipe((0,s.U)(([t,e])=>t.filter(t=>e.participants.includes(t.id))))}getActiveParticipant(){const t=this.appRouter.getParticipantId();return this.participants$.asObservable().pipe((0,s.U)(e=>e[t]))}getBookings(){return(0,P.aj)([this.bookings$,this.projectService.getActiveProject()]).pipe((0,s.U)(([t,e])=>Object.values(t).filter(t=>t.projectId===(null==e?void 0:e.id))))}getBookingsByParticipantId(t){return this.getBookings().pipe((0,s.U)(e=>e.filter(e=>e.participants.includes(t))))}createBookingGroups(t){const e=t.reduce((t,e)=>{const r=e.startDate,a=e.endDate,i=r!==a,n=t[r]||[],o=t[a]||[];return n.push(e),i&&o.push(e),t[r]=n,i&&(t[a]=o),t},{});return Object.keys(e).map(t=>({date:t,bookings:e[t]}))}getBookingGroupsByDate(){return this.getBookings().pipe((0,s.U)(this.createBookingGroups),(0,s.U)(this.sortBookingGroups))}getBookingGroupsForParticipant(){return this.getActiveParticipant().pipe((0,D.w)(t=>this.getBookingsByParticipantId(t.id)),(0,s.U)(t=>this.createBookingGroups(t)),(0,s.U)(this.sortBookingGroups))}sortParticipantsByName(t){return[...t].sort((t,e)=>{const r=t.firstName.charAt(0),a=e.firstName.charAt(0);return r>a?1:a>r?-1:0})}sortBookingGroups(t){return[...t].sort((t,e)=>{const r=new Date(t.date),a=new Date(e.date);return S(r,a)?1:S(a,r)?-1:0})}getActiveBooking(){const t=this.appRouter.getBookingId();return this.bookings$.asObservable().pipe((0,s.U)(e=>e[t]))}getBookingById(t){return this.bookings$.asObservable().pipe((0,s.U)(e=>e[t]))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(i.So),d.LFG(v))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac}),t})();function w(t,e){if(1&t&&(d.TgZ(0,"main",1),d._UZ(1,"app-authenticated-header"),d.TgZ(2,"nav",2),d.TgZ(3,"a",3),d.TgZ(4,"span"),d._UZ(5,"svg-icon",4),d.qZA(),d.TgZ(6,"span"),d._uU(7,"Projects"),d.qZA(),d.qZA(),d.TgZ(8,"span",5),d._uU(9," / "),d.qZA(),d.TgZ(10,"h1",6),d._uU(11),d.qZA(),d.qZA(),d.TgZ(12,"div",7),d.TgZ(13,"div",8),d.TgZ(14,"div",9),d._UZ(15,"svg-icon",10),d.TgZ(16,"h2",11),d._uU(17,"Itinerary"),d.qZA(),d.qZA(),d.TgZ(18,"p",12),d._uU(19,"Keeps track of all bookings"),d.qZA(),d.TgZ(20,"div",13),d.TgZ(21,"span",14),d.TgZ(22,"a",15),d._uU(23," Today "),d.qZA(),d.qZA(),d.TgZ(24,"span",14),d.TgZ(25,"a",15),d._uU(26," All "),d.qZA(),d.qZA(),d.TgZ(27,"span",14),d.TgZ(28,"a",15),d._uU(29," Next 7 days "),d.qZA(),d.qZA(),d.TgZ(30,"span"),d.TgZ(31,"a",15),d._uU(32," Past 7 days "),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(33,"div",16),d.TgZ(34,"a",17),d._UZ(35,"svg-icon",18),d.TgZ(36,"h2",19),d._uU(37,"Participants"),d.qZA(),d.qZA(),d.TgZ(38,"p"),d._uU(39,"A list of all people involved in the project"),d.qZA(),d.qZA(),d.TgZ(40,"div",20),d.TgZ(41,"a",21),d._UZ(42,"svg-icon",22),d.TgZ(43,"h2",19),d._uU(44,"Sharing center"),d.qZA(),d.qZA(),d.TgZ(45,"p"),d._uU(46," Keeps track of latest shared documents and sent emails through the app "),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t){const t=e.ngIf;d.xp6(11),d.Oqu(t.name)}}let O=(()=>{class t{constructor(t,e){this.projectService=t,this.projectDataService=e,this.project$=this.projectService.getActiveProject(),this.pastBookings$=this.projectDataService.getBookings().pipe((0,s.U)(t=>t.filter(t=>!k(new Date(t.startDate))&&g(new Date(t.startDate)))),(0,s.U)(t=>t.slice(0,3))),this.todayBookings$=this.projectDataService.getBookings().pipe((0,s.U)(t=>t.filter(t=>k(new Date(t.startDate)))),(0,s.U)(t=>t.slice(0,3))),this.upcomingBookings$=this.projectDataService.getBookings().pipe((0,s.U)(t=>t.filter(t=>!k(new Date(t.startDate))&&function(t){return c(1,arguments),p(t).getTime()>Date.now()}(new Date(t.startDate)))),(0,s.U)(t=>t.slice(0,3)))}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(v),d.Y36(C))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-project-details"]],decls:2,vars:3,consts:[["class","centered-content padded-container",4,"ngIf"],[1,"centered-content","padded-container"],[1,"mb-2","mobile-ml-1","flex","align-center"],["routerLink","../","cta","tertiary",1,"inline-flex","align-center"],["key","back",1,"mr-1"],[1,"ml-1","mr-1"],[1,"bold","h5"],[1,"mobile-ml-1","mobile-mr-1","card-container","wrap","column"],[1,"card","mb-2","flex","column"],[1,"flex","mb-1","align-center"],["key","itinerary","size","lg",1,"mr-1","itinerary-icon"],[1,"h3"],[1,"mb-1"],[1,"flex","wrap"],[1,"mr-3"],["routerLink","itinerary","cta","tertiary"],[1,"card","mb-2"],["routerLink","participants","cta","tertiary",1,"align-center"],["key","people",1,"mr-1"],[1,"h5"],[1,"card"],["routerLink","sharing","cta","tertiary",1,"align-center"],["key","share-center",1,"mr-1"]],template:function(t,e){1&t&&(d.YNc(0,w,47,1,"main",0),d.ALo(1,"async")),2&t&&d.Q6J("ngIf",d.lcZ(1,1,e.project$))},styles:[".itinerary-icon[_ngcontent-%COMP%]{color:var(--secondary-color)}"]}),t})(),I=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-project-context"]],features:[d._Bn([C])],decls:1,vars:0,template:function(t,e){1&t&&d._UZ(0,"router-outlet")},directives:[a.lC],styles:[""]}),t})();var $=r(6226),x=r(2608),M=r(8583);const L=[{path:"",component:I,children:[{path:"",component:A},{path:":projectId",pathMatch:"exact",component:O},{path:":projectId/itinerary",loadChildren:()=>Promise.all([r.e(592),r.e(438)]).then(r.bind(r,438)).then(t=>t.ItineraryModule)},{path:":projectId/participants",loadChildren:()=>Promise.all([r.e(592),r.e(850)]).then(r.bind(r,4850)).then(t=>t.ParticipantsModule)},{path:":projectId/sharing",loadChildren:()=>r.e(46).then(r.bind(r,4046)).then(t=>t.DataSharingModule)},{path:"**",redirectTo:""}]}];let H=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[i.m8,a.Bz.forChild(L),n.p],a.Bz]}),t})();d.B6R(A,[$.W,x.bk,M.sg,a.yS],[M.Ov,M.uU]),d.B6R(O,[M.O5,$.W,a.yS,x.bk],[M.Ov])}}]);