<main class="centered-content padded-container">
  <app-authenticated-header></app-authenticated-header>
  <nav class="mb-2 mobile-ml-1 mobile-mr-1">
    <span>
      <a routerLink="../../.." cta="tertiary"> Dashboard </a>
    </span>

    <span class="ml-1 mr-1"> / </span>

    <span>
      <a routerLink="../../" cta="tertiary">{{
        (activeProject$ | async)?.name
      }}</a>
    </span>

    <span class="ml-1 mr-1"> / </span>

    <span>
      <a routerLink="../" cta="tertiary">Participants</a>
    </span>
  </nav>

  <article
    *ngIf="participant$ | async as participant"
    class="mobile-ml-1 mobile-mr-1"
  >
    <header class="flex mb-3 mobile-mb-2">
      <div class="img-container">
        <img src="assets/avatar.jpg" />
      </div>

      <div class="ml-3 mb-2">
        <h1 class="mb-2 h3">
          {{ participant.firstName }} {{ participant.lastName }}
        </h1>

        <div class="flex align-center desktop-action">
          <svg-icon
            key="star"
            size="lg"
            class="favorite-star"
            [class.active]="isFavorite(participant.id) | async"
          ></svg-icon>
          <button
            cta="outlined"
            class="ml-2"
            (click)="toggleFavorite(participant.id)"
          >
            <span *ngIf="!(isFavorite(participant.id) | async)"
              >Add to favorites</span
            >
            <span *ngIf="isFavorite(participant.id) | async"
              >Remove favorite</span
            >
          </button>
        </div>

        <div class="mt-3 flex align-center desktop-action">
          <svg-icon key="share" size="lg"></svg-icon>
          <span class="flex">
            <a
              cta="outlined"
              class="ml-2"
              [routerLink]="['../..', 'sharing', 'itinerary', 'send']"
              [queryParams]="{ participant: participant.id }"
              >Send itinerary</a
            >
          </span>
        </div>
      </div>
    </header>

    <div class="card-container mobile-actions">
      <div class="flex align-center favorites">
        <svg-icon
          key="star"
          size="lg"
          class="favorite-star"
          [class.active]="isFavorite(participant.id) | async"
        ></svg-icon>
        <button
          cta="outlined"
          class="ml-2"
          (click)="toggleFavorite(participant.id)"
        >
          <span *ngIf="!(isFavorite(participant.id) | async)"
            >Add to favorites</span
          >
          <span *ngIf="isFavorite(participant.id) | async"
            >Remove favorite</span
          >
        </button>
      </div>

      <div class="mt-3 flex align-center sharing">
        <svg-icon key="share" size="lg"></svg-icon>
        <span class="flex">
          <a
            cta="outlined"
            class="ml-2"
            [routerLink]="['../..', 'sharing', 'itinerary', 'send']"
            [queryParams]="{ participant: participant.id }"
            >Send itinerary</a
          >
        </span>
      </div>
    </div>

    <div class="mt-4 mobile-mt-3 mobile-ml-1 mobile-mr-1">
      <div class="tab-controls">
        <a
          cta="tertiary"
          [routerLink]="['./']"
          [class.active]="appRouter.isRouteActive('general')"
          >General</a
        >
        <a
          cta="tertiary"
          [routerLink]="['itinerary']"
          [class.active]="appRouter.isRouteActive('itinerary')"
          >Itinerary</a
        >
      </div>

      <div class="separator secondary mt-3 mb-2"></div>
      <router-outlet></router-outlet>
    </div>
  </article>
</main>
