(self.webpackChunkgoatzilla=self.webpackChunkgoatzilla||[]).push([[647],{5647:(t,e,n)=>{"use strict";n.r(e),n.d(e,{DataSharingModule:()=>k});var r=n(9171),a=n(9277),c=n(6287),i=n(7716),o=n(6231),s=n(6226),p=n(8583);let u=(()=>{class t{constructor(t){this.projectService=t,this.activeProject$=this.projectService.getActiveProject()}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(o.ProjectsService))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-share-itinerary"]],decls:20,vars:3,consts:[[1,"centered-content","padded-container"],[1,"mb-2","mt-1"],["routerLink","../../../../","cta","tertiary"],[1,"ml-1","mr-1"],["routerLink","../../../","cta","tertiary"],["routerLink","../../","cta","tertiary"]],template:function(t,e){if(1&t&&(i.TgZ(0,"main",0),i._UZ(1,"app-authenticated-header"),i.TgZ(2,"header",1),i.TgZ(3,"span"),i.TgZ(4,"a",2),i._uU(5," Dashboard "),i.qZA(),i.qZA(),i.TgZ(6,"span",3),i._uU(7," / "),i.qZA(),i.TgZ(8,"span"),i.TgZ(9,"a",4),i._uU(10),i.ALo(11,"async"),i.qZA(),i.qZA(),i.TgZ(12,"span",3),i._uU(13," / "),i.qZA(),i.TgZ(14,"span"),i.TgZ(15,"a",5),i._uU(16,"Sharing center"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(17,"article"),i.TgZ(18,"p"),i._uU(19,"Send itinerary information to participants"),i.qZA(),i.qZA(),i.qZA()),2&t){let t;i.xp6(10),i.Oqu(null==(t=i.lcZ(11,1,e.activeProject$))?null:t.name)}},directives:[s.W,r.yS],pipes:[p.Ov],styles:[""],changeDetection:0}),t})(),Z=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-itinerary"]],decls:2,vars:0,template:function(t,e){1&t&&(i.TgZ(0,"p"),i._uU(1,"itinerary works!"),i.qZA())},styles:[""]}),t})(),l=(()=>{class t{constructor(t){this.projectService=t,this.activeProject$=this.projectService.getActiveProject()}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(o.ProjectsService))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-sharing-dashboard"]],decls:17,vars:3,consts:[[1,"centered-content","padded-container"],[1,"mb-3","mt-1"],["routerLink","../../","cta","tertiary"],[1,"ml-1","mr-1"],["routerLink","../","cta","tertiary"],[1,"mb-2"]],template:function(t,e){if(1&t&&(i.TgZ(0,"main",0),i._UZ(1,"app-authenticated-header"),i.TgZ(2,"header",1),i.TgZ(3,"span"),i.TgZ(4,"a",2),i._uU(5," Dashboard "),i.qZA(),i.qZA(),i.TgZ(6,"span",3),i._uU(7," / "),i.qZA(),i.TgZ(8,"span"),i.TgZ(9,"a",4),i._uU(10),i.ALo(11,"async"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(12,"article"),i.TgZ(13,"p",5),i._uU(14,"Keeps a list of sent emails"),i.qZA(),i.TgZ(15,"p"),i._uU(16,"And also a list of upcoming automatic emails"),i.qZA(),i.qZA(),i.qZA()),2&t){let t;i.xp6(10),i.Oqu(null==(t=i.lcZ(11,1,e.activeProject$))?null:t.name)}},directives:[s.W,r.yS],pipes:[p.Ov],styles:[""],changeDetection:0}),t})(),g=(()=>{class t{constructor(t){this.projectService=t,this.activeProject$=this.projectService.getActiveProject()}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(o.ProjectsService))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-share-booking"]],decls:20,vars:3,consts:[[1,"centered-content","padded-container"],[1,"mb-2","mt-1"],["routerLink","../../../../","cta","tertiary"],[1,"ml-1","mr-1"],["routerLink","../../../","cta","tertiary"],["routerLink","../../","cta","tertiary"]],template:function(t,e){if(1&t&&(i.TgZ(0,"main",0),i._UZ(1,"app-authenticated-header"),i.TgZ(2,"header",1),i.TgZ(3,"span"),i.TgZ(4,"a",2),i._uU(5," Dashboard "),i.qZA(),i.qZA(),i.TgZ(6,"span",3),i._uU(7," / "),i.qZA(),i.TgZ(8,"span"),i.TgZ(9,"a",4),i._uU(10),i.ALo(11,"async"),i.qZA(),i.qZA(),i.TgZ(12,"span",3),i._uU(13," / "),i.qZA(),i.TgZ(14,"span"),i.TgZ(15,"a",5),i._uU(16,"Sharing center"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(17,"article"),i.TgZ(18,"p"),i._uU(19,"Send an email with detailed booking information"),i.qZA(),i.qZA(),i.qZA()),2&t){let t;i.xp6(10),i.Oqu(null==(t=i.lcZ(11,1,e.activeProject$))?null:t.name)}},directives:[s.W,r.yS],pipes:[p.Ov],styles:[""],changeDetection:0}),t})();var d=n(5917),A=n(8002);let h=(()=>{class t{constructor(t){this.snackbar=t,this.save=new i.vpe,this.code=""}onCopy(){this.snackbar.open("Share link copied to clipboard!","",{duration:3e3})}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(a.ux))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-share-settings"]],inputs:{code:"code"},outputs:{save:"save"},decls:5,vars:0,consts:[[1,"card-container","wrap","align-center","space-between"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0),i.TgZ(1,"div"),i._uU(2,"Settings"),i.qZA(),i.TgZ(3,"div"),i._uU(4,"Sharing"),i.qZA(),i.qZA())},styles:[""]}),t})();const q=function(t){return["../../..","itinerary",t]};function T(t,e){if(1&t&&(i.TgZ(0,"tr"),i.TgZ(1,"td"),i.TgZ(2,"a",3),i._uU(3),i.qZA(),i.qZA(),i.TgZ(4,"td",4),i._uU(5),i.ALo(6,"currency"),i.qZA(),i.TgZ(7,"td",4),i._uU(8),i.qZA(),i.TgZ(9,"td",4),i._uU(10),i.ALo(11,"currency"),i.qZA(),i.qZA()),2&t){const t=e.$implicit,n=i.oxw();i.xp6(2),i.Q6J("routerLink",i.VKq(12,q,t.id)),i.xp6(1),i.AsE("",t.provider," / ",t.confirmationNumber,""),i.xp6(2),i.hij(" ",i.xi3(6,6,t.price,t.currencyCode)," "),i.xp6(3),i.Oqu(t.participants.length),i.xp6(2),i.hij(" ",i.xi3(11,9,n.getBookingTotal(t),t.currencyCode)," ")}}let m=(()=>{class t{constructor(){this.bookings=[]}getBookingTotal(t){return(t.participants.length*t.price).toFixed(2)}getAllBookingsTotal(t){return t.reduce((t,e)=>t+e.participants.length*e.price,0).toFixed(2)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-price-report-visualization"]],inputs:{bookings:"bookings"},decls:19,vars:5,consts:[[1,"mb-4","table"],[4,"ngFor","ngForOf"],[1,"bold","mr-2"],["cta","tertiary",3,"routerLink"],[1,"centered"]],template:function(t,e){1&t&&(i.TgZ(0,"table",0),i.TgZ(1,"thead"),i.TgZ(2,"tr"),i.TgZ(3,"th"),i._uU(4,"Booking"),i.qZA(),i.TgZ(5,"th"),i._uU(6,"Price"),i.qZA(),i.TgZ(7,"th"),i._uU(8,"Quantity"),i.qZA(),i.TgZ(9,"th"),i._uU(10,"Total"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(11,"tbody"),i.YNc(12,T,12,14,"tr",1),i.qZA(),i.qZA(),i.TgZ(13,"div"),i.TgZ(14,"span",2),i._uU(15,"Total: "),i.qZA(),i.TgZ(16,"span"),i._uU(17),i.ALo(18,"currency"),i.qZA(),i.qZA()),2&t&&(i.xp6(12),i.Q6J("ngForOf",e.bookings),i.xp6(5),i.Oqu(i.xi3(18,2,e.getAllBookingsTotal(e.bookings),null==e.bookings[0]?null:e.bookings[0].currencyCode)))},directives:[p.sg,r.yS],pipes:[p.H9],styles:[".table[_ngcontent-%COMP%]{table-layout:auto;width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid var(--secondary-color)}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:var(--space-1)}.table[_ngcontent-%COMP%]   .centered[_ngcontent-%COMP%]{text-align:center}"]}),t})();const v=function(){return[]};let y=(()=>{class t{constructor(t,e){this.projectService=t,this.dataService=e,this.bookings$=(0,d.of)([]),this.activeProject$=this.projectService.getActiveProject(),this.bookings$=this.dataService.getFilteredBookings().pipe((0,A.U)(this.dataService.sortBookings))}handleSave(t){console.log(t)}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(o.ProjectsService),i.Y36(o.ProjectDataService))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-price-report"]],decls:21,vars:7,consts:[[1,"centered-content","padded-container"],[1,"mb-2","mt-1"],["routerLink","../../../../","cta","tertiary"],[1,"ml-1","mr-1"],["routerLink","../../../","cta","tertiary"],["routerLink","../../","cta","tertiary"],[1,"mobile-ml-1","mobile-mr-1"],[1,"block","mb-3",3,"save"],[3,"bookings"]],template:function(t,e){if(1&t&&(i.TgZ(0,"main",0),i._UZ(1,"app-authenticated-header"),i.TgZ(2,"header",1),i.TgZ(3,"span"),i.TgZ(4,"a",2),i._uU(5," Dashboard "),i.qZA(),i.qZA(),i.TgZ(6,"span",3),i._uU(7," / "),i.qZA(),i.TgZ(8,"span"),i.TgZ(9,"a",4),i._uU(10),i.ALo(11,"async"),i.qZA(),i.qZA(),i.TgZ(12,"span",3),i._uU(13," / "),i.qZA(),i.TgZ(14,"span"),i.TgZ(15,"a",5),i._uU(16,"Sharing center"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(17,"article",6),i.TgZ(18,"app-share-settings",7),i.NdJ("save",function(t){return e.handleSave(t)}),i.qZA(),i._UZ(19,"app-price-report-visualization",8),i.ALo(20,"async"),i.qZA(),i.qZA()),2&t){let t;i.xp6(10),i.Oqu(null==(t=i.lcZ(11,2,e.activeProject$))?null:t.name),i.xp6(9),i.Q6J("bookings",i.lcZ(20,4,e.bookings$)||i.DdM(6,v))}},directives:[s.W,r.yS,h,m],pipes:[p.Ov],styles:[""]}),t})();var _=n(7911);const b=[{path:"",component:l,canActivate:[c.WithAuthGuard]},{path:"itinerary/send",component:u,canActivate:[c.WithAuthGuard]},{path:"itinerary/view/:token",component:Z},{path:"booking/send",component:g,canActivate:[c.WithAuthGuard]},{path:"pricing/send",component:y,canActivate:[c.WithAuthGuard]},{path:"**",redirectTo:""}];let k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[a.m8,r.Bz.forChild(b),_.p],r.Bz]}),t})()}}]);