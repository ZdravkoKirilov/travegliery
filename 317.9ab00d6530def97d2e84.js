(self.webpackChunkgoatzilla=self.webpackChunkgoatzilla||[]).push([[317],{5317:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ProjectDataService:()=>w,ProjectsModule:()=>Y,ProjectsService:()=>v});var r=i(6266),a=i(7853),n=i(1323),o=i(5917),s=i(8002);function c(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function p(t){c(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function g(t){return c(1,arguments),p(t).getTime()<Date.now()}var d=i(7716),l=i(6215);function u(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function m(t,e){c(2,arguments);var i=p(t),r=u(e);return isNaN(r)?new Date(NaN):r?(i.setDate(i.getDate()+r),i):i}function h(t,e){c(2,arguments);var i=u(e);return m(t,-i)}const Z=new Date,f={1:{id:"1",name:"Project 1",image:"",start:h(Z,55).toUTCString(),end:m(Z,25).toUTCString()},2:{id:"2",name:"Project 2",image:"",start:h(Z,55).toUTCString(),end:h(Z,5).toUTCString()},3:{id:"3",name:"Project 3",image:"",start:h(Z,55).toUTCString(),end:m(Z,5).toUTCString()}};let v=(()=>{class t{constructor(t){this.appRouter=t,this.projects$=new l.X(f)}getProjects(){return this.projects$.asObservable().pipe((0,s.U)(t=>Object.values(t)))}getActiveProject(){const t=this.appRouter.getProjectId();return this.projects$.asObservable().pipe((0,s.U)(e=>e[t]))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(a.So))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const T=function(t){return[t]};function j(t,e){if(1&t&&(d.TgZ(0,"div",9),d.TgZ(1,"h2",10),d._uU(2),d.qZA(),d.TgZ(3,"div",11),d.TgZ(4,"span"),d._uU(5),d.ALo(6,"date"),d.qZA(),d._uU(7," - "),d.TgZ(8,"span"),d._uU(9),d.ALo(10,"date"),d.qZA(),d.qZA(),d.TgZ(11,"div"),d.TgZ(12,"a",12),d._uU(13,"Open"),d.qZA(),d.qZA(),d.qZA()),2&t){const t=e.$implicit;d.xp6(2),d.Oqu(t.name),d.xp6(3),d.Oqu(d.lcZ(6,4,t.start)),d.xp6(4),d.Oqu(d.lcZ(10,6,t.end)),d.xp6(3),d.Q6J("routerLink",d.VKq(8,T,t.id))}}function U(t,e){if(1&t&&(d.TgZ(0,"div",9),d.TgZ(1,"h2",10),d._uU(2),d.qZA(),d.TgZ(3,"div",11),d.TgZ(4,"span"),d._uU(5),d.ALo(6,"date"),d.qZA(),d._uU(7," - "),d.TgZ(8,"span"),d._uU(9),d.ALo(10,"date"),d.qZA(),d.qZA(),d.TgZ(11,"div"),d.TgZ(12,"a",12),d._uU(13,"Open"),d.qZA(),d.qZA(),d.qZA()),2&t){const t=e.$implicit;d.xp6(2),d.Oqu(t.name),d.xp6(3),d.Oqu(d.lcZ(6,4,t.start)),d.xp6(4),d.Oqu(d.lcZ(10,6,t.end)),d.xp6(3),d.Q6J("routerLink",d.VKq(8,T,t.id))}}let A=(()=>{class t{constructor(t){this.projectService=t,this.activeProjects$=(0,o.of)([]),this.pastProjects$=(0,o.of)([])}ngOnInit(){this.activeProjects$=this.projectService.getProjects().pipe((0,s.U)(t=>t.filter(t=>!g(new Date(t.end))))),this.pastProjects$=this.projectService.getProjects().pipe((0,s.U)(t=>t.filter(t=>g(new Date(t.end)))))}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(v))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-projects-list"]],decls:18,vars:6,consts:[[1,"centered-content","padded-container"],[1,"mb-2"],[1,"mb-2","mt-1","mobile-mb-1","main-heading","flex","align-center"],["key","notes","size","lg",1,"projects-icon"],[1,"h2","ml-1"],[1,"mb-4"],[1,"mb-2","h4","heading"],[1,"card-container","wrap"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"h5","mb-1"],[1,"mb-1","small-text","italic"],["cta","tertiary",3,"routerLink"]],template:function(t,e){1&t&&(d.TgZ(0,"article",0),d._UZ(1,"app-authenticated-header",1),d.TgZ(2,"div",2),d._UZ(3,"svg-icon",3),d.TgZ(4,"h1",4),d._uU(5,"Projects"),d.qZA(),d.qZA(),d.TgZ(6,"section",5),d.TgZ(7,"h2",6),d._uU(8,"Active"),d.qZA(),d.TgZ(9,"div",7),d.YNc(10,j,14,10,"div",8),d.ALo(11,"async"),d.qZA(),d.qZA(),d.TgZ(12,"section"),d.TgZ(13,"h2",6),d._uU(14,"Past"),d.qZA(),d.TgZ(15,"div",7),d.YNc(16,U,14,10,"div",8),d.ALo(17,"async"),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(10),d.Q6J("ngForOf",d.lcZ(11,2,e.activeProjects$)),d.xp6(6),d.Q6J("ngForOf",d.lcZ(17,4,e.pastProjects$)))},styles:["[_nghost-%COMP%]   .main-heading[_ngcontent-%COMP%]{padding:0 var(--space-1)}[_nghost-%COMP%]   .main-heading[_ngcontent-%COMP%]   .projects-icon[_ngcontent-%COMP%]{color:var(--secondary-color)}[_nghost-%COMP%]   .heading[_ngcontent-%COMP%]{padding:var(--space-1);border-radius:10px;background-color:var(--neutral-transparent-color)}@media (max-width:64em){[_nghost-%COMP%]   .heading[_ngcontent-%COMP%]{padding:var(--space-1);border-radius:0}[_nghost-%COMP%]   .card-container[_ngcontent-%COMP%]{padding:0 var(--space-1)}[_nghost-%COMP%]   .padded-content[_ngcontent-%COMP%]{padding-bottom:var(--space-2)}}"]}),t})();function y(t){c(1,arguments);var e=p(t);return e.setHours(0,0,0,0),e}function b(t,e){c(2,arguments);var i=y(t),r=y(e);return i.getTime()===r.getTime()}function q(t){return c(1,arguments),b(t,Date.now())}var k=i(739),P=i(5257),_=i(3190);function D(t,e){c(2,arguments);var i=p(t),r=p(e);return i.getTime()>r.getTime()}const S=new Date,O={1:{id:"1",projectId:"1",type:"flight",startDate:h(S,5).toUTCString(),startTime:"11:30",endDate:h(S,5).toUTCString(),endTime:"13:30",provider:"Austrian airlines",participants:["1","2","8"],from:"London - Heathrow",to:"Paris De Gaul",image:"assets/booking-images/flight1.jpg"},2:{id:"2",projectId:"1",type:"hotel",startDate:h(S,5).toUTCString(),startTime:"14:00",endDate:h(S,4).toUTCString(),endTime:"12:00",provider:"Sofia grand hotel",participants:["1","2","6"],city:"Sofia",address:"Tsar Osvoboditel 13",image:"assets/booking-images/hotel1.jpg"},3:{id:"3",projectId:"2",type:"ferry",startDate:h(S,3).toUTCString(),startTime:" 14:00",endDate:h(S,3).toUTCString(),endTime:"16:00",provider:"Sharky fella",participants:["5","7"],from:"Istanbul port 1",to:"Istanbul port 2",image:"assets/booking-images/ferry1.jpg"},4:{id:"4",projectId:"3",type:"train",startDate:S.toUTCString(),startTime:"09:00",endDate:S.toUTCString(),endTime:"19:00",provider:"Old Tomm",participants:["3","4","7"],from:"Moscow",to:"St Petersburg",image:"assets/booking-images/train1.jpg"},5:{id:"5",projectId:"1",type:"flight",startDate:S.toUTCString(),startTime:"11:30",endDate:S.toUTCString(),endTime:"13:25",provider:"Qatar airlines",participants:["1","2"],from:"London - Heathrow",to:"Paris De Gaul",image:"assets/booking-images/flight2.jpg"},6:{id:"6",projectId:"1",type:"flight",startDate:m(S,1).toUTCString(),startTime:"09:30",endDate:m(S,1).toUTCString(),endTime:"14:45",provider:"Qatar airlines",participants:["1","2"],from:"Vienna airport",to:"Qatar",image:"assets/booking-images/flight3.jpg"},7:{id:"7",projectId:"1",type:"train",startDate:m(S,1).toUTCString(),startTime:"09:30",endDate:m(S,2).toUTCString(),endTime:"11:00",provider:"Qatar train services",participants:["1","2"],from:"Qatar central station",to:"Bangalore",image:"assets/booking-images/train1.jpg"},8:{id:"8",projectId:"1",type:"ferry",startDate:m(S,3).toUTCString(),startTime:"09:30",endDate:m(S,3).toUTCString(),endTime:"22:00",provider:"Indian ferry services",participants:["1","2","3","4"],from:"Bangalore port",to:"New Zealand",image:"assets/booking-images/ferry2.jpg"},9:{id:"9",projectId:"1",type:"hotel",startDate:m(S,5).toUTCString(),startTime:"12:00",endDate:m(S,7).toUTCString(),endTime:"11:00",provider:"K West Hotel and Spa",participants:["1","2","3","4"],city:"London",address:"Richmond Way, London W14 0AX",image:"assets/booking-images/hotel4.jpg"}},C={1:{id:"1",projectId:"1",firstName:"John",lastName:"Simmons",email:"johns@gmail.com",phone:"447969899667"},2:{id:"2",projectId:"1",firstName:"Jean",lastName:"Tennesy",email:"jeant@hotmail.com",phone:"441235995998"},3:{id:"3",projectId:"3",firstName:"Eric",lastName:"Gartner",email:"ericg@hotmail.com",phone:"441229745677"},4:{id:"4",projectId:"3",firstName:"Vanessa",lastName:"Hughes",email:"vanhughes@gmail.com",phone:"447969888777"},5:{id:"5",projectId:"2",firstName:"Patrick",lastName:"Rothfuss",email:"nottodaypat@yahoo.com",phone:"447969844776"},6:{id:"6",projectId:"2",firstName:"Patricia",lastName:"Gates",email:"patgates55@yahoo.com",phone:"447977158757"},7:{id:"7",projectId:"3",firstName:"Ivan",lastName:"Orlov",email:"luckychicken@gmail.com",phone:"447989555444"},8:{id:"8",projectId:"1",firstName:"Charlotte",lastName:"Baby",email:"cbaby@hotmail.com",phone:"447475332211"},9:{id:"9",projectId:"1",firstName:"Jake",lastName:"Heart",email:"jakeh@hotmail.com",phone:"447798554669"},10:{id:"10",projectId:"1",firstName:"Chloe",lastName:"Fartlec",email:"chloef@hotmail.com",phone:"447897457221"}};let w=(()=>{class t{constructor(t,e){this.appRouter=t,this.projectService=e,this.participants$=new l.X(C),this.bookings$=new l.X(O),this._favoriteParticipants$=new l.X(["1"]),this.favoriteParticipants$=this._favoriteParticipants$.asObservable(),this.sortParticipantsByFavorites=t=>{const e=this._favoriteParticipants$.getValue();return[...t].sort((t,i)=>{const r=e.includes(t.id),a=e.includes(i.id);return r&&!a?-1:a&&!r?1:0})}}addToFavorites(t){return this.favoriteParticipants$.pipe((0,P.q)(1),(0,s.U)(e=>{const i=[...e,t];return this._favoriteParticipants$.next(i),i}))}removeFromFavorites(t){return this.favoriteParticipants$.pipe((0,P.q)(1),(0,s.U)(e=>{const i=e.filter(e=>e!==t);return this._favoriteParticipants$.next(i),i}))}getParticipants(){return(0,k.aj)([this.participants$,this.projectService.getActiveProject()]).pipe((0,s.U)(([t,e])=>Object.values(t).filter(t=>t.projectId===(null==e?void 0:e.id))),(0,s.U)(this.sortParticipantsByName),(0,s.U)(this.sortParticipantsByFavorites))}getBookingParticipants(t){return(0,k.aj)([this.getParticipants(),this.getBookingById(t)]).pipe((0,s.U)(([t,e])=>t.filter(t=>e.participants.includes(t.id))))}getActiveParticipant(){const t=this.appRouter.getParticipantId();return this.participants$.asObservable().pipe((0,s.U)(e=>e[t]))}getBookings(){return(0,k.aj)([this.bookings$,this.projectService.getActiveProject()]).pipe((0,s.U)(([t,e])=>Object.values(t).filter(t=>t.projectId===(null==e?void 0:e.id))))}getBookingsByParticipantId(t){return this.getBookings().pipe((0,s.U)(e=>e.filter(e=>e.participants.includes(t))))}createBookingGroups(t){const e=t.reduce((t,e)=>{const i=e.startDate,r=e.endDate,a=i!==r,n=t[i]||[],o=t[r]||[];return n.push(e),a&&o.push(e),t[i]=n,a&&(t[r]=o),t},{});return Object.keys(e).map(t=>({date:t,bookings:e[t]}))}getBookingGroupsByDate(){return this.getBookings().pipe((0,s.U)(this.createBookingGroups),(0,s.U)(this.sortBookingGroups))}getBookingGroupsForParticipant(){return this.getActiveParticipant().pipe((0,_.w)(t=>this.getBookingsByParticipantId(t.id)),(0,s.U)(t=>this.createBookingGroups(t)),(0,s.U)(this.sortBookingGroups))}sortParticipantsByName(t){return[...t].sort((t,e)=>{const i=t.firstName.charAt(0),r=e.firstName.charAt(0);return i>r?1:r>i?-1:0})}sortBookingGroups(t){return[...t].sort((t,e)=>{const i=new Date(t.date),r=new Date(e.date);return D(i,r)?1:D(r,i)?-1:0})}getActiveBooking(){const t=this.appRouter.getBookingId();return this.bookings$.asObservable().pipe((0,s.U)(e=>e[t]))}getBookingById(t){return this.bookings$.asObservable().pipe((0,s.U)(e=>e[t]))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(a.So),d.LFG(v))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac}),t})();const B=function(t){return["itinerary",t]};function I(t,e){if(1&t&&(d.TgZ(0,"div",28),d.TgZ(1,"span",20),d._uU(2,"|"),d.qZA(),d.TgZ(3,"a",29),d._uU(4),d.qZA(),d.qZA()),2&t){const t=e.$implicit;d.xp6(3),d.Q6J("routerLink",d.VKq(2,B,t.id)),d.xp6(1),d.Oqu(t.provider)}}function N(t,e){if(1&t&&(d.TgZ(0,"div",28),d.TgZ(1,"span",20),d._uU(2,"|"),d.qZA(),d.TgZ(3,"a",29),d._uU(4),d.qZA(),d.qZA()),2&t){const t=e.$implicit;d.xp6(3),d.Q6J("routerLink",d.VKq(2,B,t.id)),d.xp6(1),d.Oqu(t.provider)}}function x(t,e){if(1&t&&(d.TgZ(0,"div",28),d.TgZ(1,"span",20),d._uU(2,"|"),d.qZA(),d.TgZ(3,"a",29),d._uU(4),d.qZA(),d.qZA()),2&t){const t=e.$implicit;d.xp6(3),d.Q6J("routerLink",d.VKq(2,B,t.id)),d.xp6(1),d.Oqu(t.provider)}}function $(t,e){if(1&t&&(d.TgZ(0,"main",1),d._UZ(1,"app-authenticated-header"),d.TgZ(2,"nav",2),d.TgZ(3,"a",3),d.TgZ(4,"span"),d._UZ(5,"svg-icon",4),d.qZA(),d.TgZ(6,"span"),d._uU(7,"Projects"),d.qZA(),d.qZA(),d.TgZ(8,"span",5),d._uU(9," / "),d.qZA(),d.TgZ(10,"h1",6),d._uU(11),d.qZA(),d.qZA(),d.TgZ(12,"div",7),d._UZ(13,"div",8),d.TgZ(14,"div",9),d.TgZ(15,"div",10),d.TgZ(16,"a",11),d._UZ(17,"svg-icon",12),d.TgZ(18,"span"),d._uU(19,"Itinerary"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(20,"div",10),d.TgZ(21,"a",13),d._UZ(22,"svg-icon",14),d.TgZ(23,"span"),d._uU(24,"Participants"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(25,"div"),d.TgZ(26,"a",15),d._UZ(27,"svg-icon",16),d.TgZ(28,"span"),d._uU(29,"Sharing center"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d._UZ(30,"div",17),d.TgZ(31,"section",18),d.TgZ(32,"h2",19),d.TgZ(33,"span",20),d._UZ(34,"svg-icon",21),d.qZA(),d.TgZ(35,"span"),d._uU(36,"Heartbeat"),d.qZA(),d.qZA(),d.TgZ(37,"section",22),d.TgZ(38,"h3",23),d._uU(39,"Past 7 days"),d.qZA(),d.YNc(40,I,5,4,"div",24),d.ALo(41,"async"),d.TgZ(42,"span",25),d._uU(43,"..."),d.qZA(),d.qZA(),d.TgZ(44,"section",26),d.TgZ(45,"h3",23),d._uU(46,"Today"),d.qZA(),d.YNc(47,N,5,4,"div",24),d.ALo(48,"async"),d.TgZ(49,"span",25),d._uU(50,"..."),d.qZA(),d.qZA(),d.TgZ(51,"section",27),d.TgZ(52,"h3",23),d._uU(53,"Next 7 days"),d.qZA(),d.YNc(54,x,5,4,"div",24),d.ALo(55,"async"),d.TgZ(56,"span",25),d._uU(57,"..."),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t){const t=e.ngIf,i=d.oxw();d.xp6(11),d.Oqu(t.name),d.xp6(29),d.Q6J("ngForOf",d.lcZ(41,4,i.pastBookings$)),d.xp6(7),d.Q6J("ngForOf",d.lcZ(48,6,i.todayBookings$)),d.xp6(7),d.Q6J("ngForOf",d.lcZ(55,8,i.upcomingBookings$))}}let L=(()=>{class t{constructor(t,e){this.projectService=t,this.projectDataService=e,this.project$=this.projectService.getActiveProject(),this.pastBookings$=this.projectDataService.getBookings().pipe((0,s.U)(t=>t.filter(t=>!q(new Date(t.startDate))&&g(new Date(t.startDate)))),(0,s.U)(t=>t.slice(0,3))),this.todayBookings$=this.projectDataService.getBookings().pipe((0,s.U)(t=>t.filter(t=>q(new Date(t.startDate)))),(0,s.U)(t=>t.slice(0,3))),this.upcomingBookings$=this.projectDataService.getBookings().pipe((0,s.U)(t=>t.filter(t=>!q(new Date(t.startDate))&&function(t){return c(1,arguments),p(t).getTime()>Date.now()}(new Date(t.startDate)))),(0,s.U)(t=>t.slice(0,3)))}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(v),d.Y36(w))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-project-details"]],decls:2,vars:3,consts:[["class","centered-content padded-container",4,"ngIf"],[1,"centered-content","padded-container"],[1,"mb-2","mobile-mb-1","mobile-ml-1","flex","align-center"],["routerLink","../","cta","tertiary",1,"inline-flex","align-center"],["key","back",1,"mr-1"],[1,"ml-1","mr-1"],[1,"bold","h5"],[1,"mobile-ml-1","mobile-mr-1"],[1,"separator","secondary","mb-2"],[1,"flex","wrap"],[1,"mr-3"],["routerLink","itinerary","cta","tertiary",1,"align-center"],["key","itinerary","size","lg",1,"mr-1"],["routerLink","participants","cta","tertiary",1,"align-center"],["key","people",1,"mr-1"],["routerLink","sharing","cta","tertiary",1,"align-center"],["key","share-center",1,"mr-1"],[1,"separator","secondary","mb-2","mt-2"],[1,"card","mt-4"],[1,"mb-2","h4","flex","align-center"],[1,"mr-1"],["key","heartbeat","size","xl",1,"heartbeat-icon"],[1,"mb-3","flex","align-center"],[1,"h5","mr-2"],["class","ml-1",4,"ngFor","ngForOf"],[1,"ml-2"],[1,"mb-3","flex"],[1,"flex"],[1,"ml-1"],[3,"routerLink"]],template:function(t,e){1&t&&(d.YNc(0,$,58,10,"main",0),d.ALo(1,"async")),2&t&&d.Q6J("ngIf",d.lcZ(1,1,e.project$))},styles:[".heartbeat-icon[_ngcontent-%COMP%]{color:var(--secondary-color)}"]}),t})(),M=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-project-context"]],features:[d._Bn([w])],decls:1,vars:0,template:function(t,e){1&t&&d._UZ(0,"router-outlet")},directives:[r.lC],styles:[""]}),t})();var F=i(6226),Q=i(2608),G=i(8583);const J=[{path:"",component:M,children:[{path:"",component:A},{path:":projectId",pathMatch:"exact",component:L},{path:":projectId/itinerary",loadChildren:()=>Promise.all([i.e(592),i.e(438)]).then(i.bind(i,438)).then(t=>t.ItineraryModule)},{path:":projectId/participants",loadChildren:()=>Promise.all([i.e(592),i.e(850)]).then(i.bind(i,4850)).then(t=>t.ParticipantsModule)},{path:":projectId/sharing",loadChildren:()=>i.e(46).then(i.bind(i,4046)).then(t=>t.DataSharingModule)},{path:"**",redirectTo:""}]}];let Y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[a.m8,r.Bz.forChild(J),n.p],r.Bz]}),t})();d.B6R(A,[F.W,Q.bk,G.sg,r.yS],[G.Ov,G.uU]),d.B6R(L,[G.O5,F.W,r.yS,Q.bk,G.sg],[G.Ov])}}]);