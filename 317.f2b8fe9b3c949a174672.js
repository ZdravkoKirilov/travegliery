(self.webpackChunkgoatzilla=self.webpackChunkgoatzilla||[]).push([[317],{5317:(t,e,r)=>{"use strict";r.r(e),r.d(e,{ProjectDataService:()=>B,ProjectsModule:()=>Y,ProjectsService:()=>v});var i=r(2863),a=r(5894),n=r(9133),o=r(5917),s=r(8002);function c(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function p(t){c(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function g(t){return c(1,arguments),p(t).getTime()<Date.now()}var u=r(8186),l=r(6215);function d(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function m(t,e){c(2,arguments);var r=p(t),i=d(e);return isNaN(i)?new Date(NaN):i?(r.setDate(r.getDate()+i),r):r}function h(t,e){c(2,arguments);var r=d(e);return m(t,-r)}const Z=new Date,f={1:{id:"1",name:"Project 1",image:"",start:h(Z,55).toUTCString(),end:m(Z,25).toUTCString()},2:{id:"2",name:"Project 2",image:"",start:h(Z,55).toUTCString(),end:h(Z,5).toUTCString()},3:{id:"3",name:"Project 3",image:"",start:h(Z,55).toUTCString(),end:m(Z,5).toUTCString()}};let v=(()=>{class t{constructor(t){this.appRouter=t,this.projects$=new l.X(f)}getProjects(){return this.projects$.asObservable().pipe((0,s.U)(t=>Object.values(t)))}getActiveProject(){const t=this.appRouter.getProjectId();return this.projects$.asObservable().pipe((0,s.U)(e=>e[t]))}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(a.So))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const T=function(t){return[t]};function U(t,e){if(1&t&&(u.TgZ(0,"div",7),u.TgZ(1,"h2",8),u._uU(2),u.qZA(),u.TgZ(3,"div",9),u.TgZ(4,"span"),u._uU(5),u.ALo(6,"date"),u.qZA(),u._uU(7," - "),u.TgZ(8,"span"),u._uU(9),u.ALo(10,"date"),u.qZA(),u.qZA(),u.TgZ(11,"div"),u.TgZ(12,"a",10),u._uU(13,"Open"),u.qZA(),u.qZA(),u.qZA()),2&t){const t=e.$implicit;u.xp6(2),u.Oqu(t.name),u.xp6(3),u.Oqu(u.lcZ(6,4,t.start)),u.xp6(4),u.Oqu(u.lcZ(10,6,t.end)),u.xp6(3),u.Q6J("routerLink",u.VKq(8,T,t.id))}}function A(t,e){if(1&t&&(u.TgZ(0,"div",7),u.TgZ(1,"h2",8),u._uU(2),u.qZA(),u.TgZ(3,"div",9),u.TgZ(4,"span"),u._uU(5),u.ALo(6,"date"),u.qZA(),u._uU(7," - "),u.TgZ(8,"span"),u._uU(9),u.ALo(10,"date"),u.qZA(),u.qZA(),u.TgZ(11,"div"),u.TgZ(12,"a",10),u._uU(13,"Open"),u.qZA(),u.qZA(),u.qZA()),2&t){const t=e.$implicit;u.xp6(2),u.Oqu(t.name),u.xp6(3),u.Oqu(u.lcZ(6,4,t.start)),u.xp6(4),u.Oqu(u.lcZ(10,6,t.end)),u.xp6(3),u.Q6J("routerLink",u.VKq(8,T,t.id))}}let j=(()=>{class t{constructor(t){this.projectService=t,this.activeProjects$=(0,o.of)([]),this.pastProjects$=(0,o.of)([])}ngOnInit(){this.activeProjects$=this.projectService.getProjects().pipe((0,s.U)(t=>t.filter(t=>!g(new Date(t.end))))),this.pastProjects$=this.projectService.getProjects().pipe((0,s.U)(t=>t.filter(t=>g(new Date(t.end)))))}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(v))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-projects-list"]],decls:16,vars:6,consts:[[1,"centered-content","padded-content"],[1,"mb-2"],[1,"mb-2","mt-1","h2"],[1,"mb-4"],[1,"mb-2","h4"],[1,"card-container"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"h5","mb-1"],[1,"mb-1","small-text","italic"],["cta","tertiary",3,"routerLink"]],template:function(t,e){1&t&&(u.TgZ(0,"article",0),u._UZ(1,"app-authenticated-header",1),u.TgZ(2,"h1",2),u._uU(3,"Projects"),u.qZA(),u.TgZ(4,"section",3),u.TgZ(5,"h2",4),u._uU(6,"Active"),u.qZA(),u.TgZ(7,"div",5),u.YNc(8,U,14,10,"div",6),u.ALo(9,"async"),u.qZA(),u.qZA(),u.TgZ(10,"section"),u.TgZ(11,"h2",4),u._uU(12,"Past"),u.qZA(),u.TgZ(13,"div",5),u.YNc(14,A,14,10,"div",6),u.ALo(15,"async"),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(8),u.Q6J("ngForOf",u.lcZ(9,2,e.activeProjects$)),u.xp6(6),u.Q6J("ngForOf",u.lcZ(15,4,e.pastProjects$)))},styles:[""]}),t})();function q(t){c(1,arguments);var e=p(t);return e.setHours(0,0,0,0),e}function y(t,e){c(2,arguments);var r=q(t),i=q(e);return r.getTime()===i.getTime()}function k(t){return c(1,arguments),y(t,Date.now())}var b=r(739),P=r(5257),S=r(3190);function _(t,e){c(2,arguments);var r=p(t),i=p(e);return r.getTime()>i.getTime()}const D=new Date,w={1:{id:"1",projectId:"1",type:"flight",startDate:h(D,5).toUTCString(),startTime:"11:30",endDate:h(D,5).toUTCString(),endTime:"13:30",provider:"Austrian airlines",participants:["1","2","8"],from:"London - Heathrow",to:"Paris De Gaul",image:"assets/booking-images/flight1.jpg"},2:{id:"2",projectId:"1",type:"hotel",startDate:h(D,5).toUTCString(),startTime:"14:00",endDate:h(D,4).toUTCString(),endTime:"12:00",provider:"Sofia grand hotel",participants:["1","2","6"],city:"Sofia",address:"Tsar Osvoboditel 13",image:"assets/booking-images/hotel1.jpg"},3:{id:"3",projectId:"2",type:"ferry",startDate:h(D,3).toUTCString(),startTime:" 14:00",endDate:h(D,3).toUTCString(),endTime:"16:00",provider:"Sharky fella",participants:["5","7"],from:"Istanbul port 1",to:"Istanbul port 2",image:"assets/booking-images/ferry1.jpg"},4:{id:"4",projectId:"3",type:"train",startDate:D.toUTCString(),startTime:"09:00",endDate:D.toUTCString(),endTime:"19:00",provider:"Old Tomm",participants:["3","4","7"],from:"Moscow",to:"St Petersburg",image:"assets/booking-images/train1.jpg"},5:{id:"5",projectId:"1",type:"flight",startDate:D.toUTCString(),startTime:"11:30",endDate:D.toUTCString(),endTime:"13:25",provider:"Qatar airlines",participants:["1","2"],from:"London - Heathrow",to:"Paris De Gaul",image:"assets/booking-images/flight2.jpg"},6:{id:"6",projectId:"1",type:"flight",startDate:m(D,1).toUTCString(),startTime:"09:30",endDate:m(D,1).toUTCString(),endTime:"14:45",provider:"Qatar airlines",participants:["1","2"],from:"Vienna airport",to:"Qatar",image:"assets/booking-images/flight3.jpg"},7:{id:"7",projectId:"1",type:"train",startDate:m(D,1).toUTCString(),startTime:"09:30",endDate:m(D,2).toUTCString(),endTime:"11:00",provider:"Qatar train services",participants:["1","2"],from:"Qatar central station",to:"Bangalore",image:"assets/booking-images/train1.jpg"},8:{id:"8",projectId:"1",type:"ferry",startDate:m(D,3).toUTCString(),startTime:" 09:30",endDate:m(D,3).toUTCString(),endTime:"22:00",provider:"Indian ferry services",participants:["1","2","3","4"],from:"Bangalore port",to:"New Zealand",image:"assets/booking-images/ferry2.jpg"}},O={1:{id:"1",projectId:"1",firstName:"John",lastName:"Simmons",email:"johns@gmail.com"},2:{id:"2",projectId:"1",firstName:"Jean",lastName:"Tennesy",email:"jeant@hotmail.com",phone:"441235995"},3:{id:"3",projectId:"3",firstName:"Eric",lastName:"Gartner",email:"ericg@hotmail.com",phone:"4412295677"},4:{id:"4",projectId:"3",firstName:"Vanessa",lastName:"Hughes",email:"vanhughes@gmail.com"},5:{id:"5",projectId:"2",firstName:"Patrick",lastName:"Rothfuss",email:"nottodaypat@yahoo.com"},6:{id:"6",projectId:"2",firstName:"Patricia",lastName:"Gates",email:"patgates55@yahoo.com"},7:{id:"7",projectId:"3",firstName:"Ivan",lastName:"Orlov",email:"luckychicken@gmail.com"},8:{id:"8",projectId:"1",firstName:"Anna",lastName:"Heartfilia",email:"annah@hotmail.com",phone:"4412295677"}};let B=(()=>{class t{constructor(t,e){this.appRouter=t,this.projectService=e,this.participants$=new l.X(O),this.bookings$=new l.X(w),this._favoriteParticipants$=new l.X(["1"]),this.favoriteParticipants$=this._favoriteParticipants$.asObservable(),this.sortParticipantsByFavorites=t=>{const e=this._favoriteParticipants$.getValue();return[...t].sort((t,r)=>{const i=e.includes(t.id),a=e.includes(r.id);return i&&!a?-1:a&&!i?1:0})}}addToFavorites(t){return this.favoriteParticipants$.pipe((0,P.q)(1),(0,s.U)(e=>{const r=[...e,t];return this._favoriteParticipants$.next(r),r}))}removeFromFavorites(t){return this.favoriteParticipants$.pipe((0,P.q)(1),(0,s.U)(e=>{const r=e.filter(e=>e!==t);return this._favoriteParticipants$.next(r),r}))}getParticipants(){return(0,b.aj)([this.participants$,this.projectService.getActiveProject()]).pipe((0,s.U)(([t,e])=>Object.values(t).filter(t=>t.projectId===(null==e?void 0:e.id))),(0,s.U)(this.sortParticipantsByName),(0,s.U)(this.sortParticipantsByFavorites))}getBookingParticipants(t){return(0,b.aj)([this.getParticipants(),this.getBookingById(t)]).pipe((0,s.U)(([t,e])=>t.filter(t=>e.participants.includes(t.id))))}getActiveParticipant(){const t=this.appRouter.getParticipantId();return this.participants$.asObservable().pipe((0,s.U)(e=>e[t]))}getBookings(){return(0,b.aj)([this.bookings$,this.projectService.getActiveProject()]).pipe((0,s.U)(([t,e])=>Object.values(t).filter(t=>t.projectId===(null==e?void 0:e.id))))}getBookingsByParticipantId(t){return this.getBookings().pipe((0,s.U)(e=>e.filter(e=>e.participants.includes(t))))}createBookingGroups(t){const e=t.reduce((t,e)=>{const r=e.startDate,i=e.endDate,a=r!==i,n=t[r]||[],o=t[i]||[];return n.push(e),a&&o.push(e),t[r]=n,a&&(t[i]=o),t},{});return Object.keys(e).map(t=>({date:t,bookings:e[t]}))}getBookingGroupsByDate(){return this.getBookings().pipe((0,s.U)(this.createBookingGroups),(0,s.U)(this.sortBookingGroups))}getBookingGroupsForParticipant(){return this.getActiveParticipant().pipe((0,S.w)(t=>this.getBookingsByParticipantId(t.id)),(0,s.U)(t=>this.createBookingGroups(t)),(0,s.U)(this.sortBookingGroups))}sortParticipantsByName(t){return[...t].sort((t,e)=>{const r=t.firstName.charAt(0),i=e.firstName.charAt(0);return r>i?1:i>r?-1:0})}sortBookingGroups(t){return[...t].sort((t,e)=>{const r=new Date(t.date),i=new Date(e.date);return _(r,i)?1:_(i,r)?-1:0})}getActiveBooking(){const t=this.appRouter.getBookingId();return this.bookings$.asObservable().pipe((0,s.U)(e=>e[t]))}getBookingById(t){return this.bookings$.asObservable().pipe((0,s.U)(e=>e[t]))}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(a.So),u.LFG(v))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac}),t})();const x=function(t){return["itinerary",t]};function I(t,e){if(1&t&&(u.TgZ(0,"div",23),u.TgZ(1,"span",16),u._uU(2,"|"),u.qZA(),u.TgZ(3,"a",24),u._uU(4),u.qZA(),u.qZA()),2&t){const t=e.$implicit;u.xp6(3),u.Q6J("routerLink",u.VKq(2,x,t.id)),u.xp6(1),u.Oqu(t.provider)}}function C(t,e){if(1&t&&(u.TgZ(0,"div",23),u.TgZ(1,"span",16),u._uU(2,"|"),u.qZA(),u.TgZ(3,"a",24),u._uU(4),u.qZA(),u.qZA()),2&t){const t=e.$implicit;u.xp6(3),u.Q6J("routerLink",u.VKq(2,x,t.id)),u.xp6(1),u.Oqu(t.provider)}}function N(t,e){if(1&t&&(u.TgZ(0,"div",23),u.TgZ(1,"span",16),u._uU(2,"|"),u.qZA(),u.TgZ(3,"a",24),u._uU(4),u.qZA(),u.qZA()),2&t){const t=e.$implicit;u.xp6(3),u.Q6J("routerLink",u.VKq(2,x,t.id)),u.xp6(1),u.Oqu(t.provider)}}function $(t,e){if(1&t&&(u.TgZ(0,"div"),u.TgZ(1,"h1",5),u._uU(2),u.qZA(),u.TgZ(3,"div",6),u.TgZ(4,"div",7),u.TgZ(5,"a",8),u._UZ(6,"svg-icon",9),u.TgZ(7,"span"),u._uU(8,"Itinerary"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(9,"div",7),u.TgZ(10,"a",10),u._UZ(11,"svg-icon",11),u.TgZ(12,"span"),u._uU(13,"Participants"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(14,"div"),u.TgZ(15,"a",12),u._UZ(16,"svg-icon",13),u.TgZ(17,"span"),u._uU(18,"Sharing center"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(19,"section",14),u.TgZ(20,"h2",15),u.TgZ(21,"span",16),u._UZ(22,"svg-icon",17),u.qZA(),u.TgZ(23,"span"),u._uU(24,"Heartbeat"),u.qZA(),u.qZA(),u.TgZ(25,"section",18),u.TgZ(26,"h3",19),u._uU(27,"Past 7 days"),u.qZA(),u.YNc(28,I,5,4,"div",20),u.ALo(29,"async"),u.TgZ(30,"span",21),u._uU(31,"..."),u.qZA(),u.qZA(),u.TgZ(32,"section",22),u.TgZ(33,"h3",19),u._uU(34,"Today"),u.qZA(),u.YNc(35,C,5,4,"div",20),u.ALo(36,"async"),u.TgZ(37,"span",21),u._uU(38,"..."),u.qZA(),u.qZA(),u.TgZ(39,"section",6),u.TgZ(40,"h3",19),u._uU(41,"Next 7 days"),u.qZA(),u.YNc(42,N,5,4,"div",20),u.ALo(43,"async"),u.TgZ(44,"span",21),u._uU(45,"..."),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t){const t=e.ngIf,r=u.oxw();u.xp6(2),u.Oqu(t.name),u.xp6(26),u.Q6J("ngForOf",u.lcZ(29,4,r.pastBookings$)),u.xp6(7),u.Q6J("ngForOf",u.lcZ(36,6,r.todayBookings$)),u.xp6(7),u.Q6J("ngForOf",u.lcZ(43,8,r.upcomingBookings$))}}let L=(()=>{class t{constructor(t,e){this.projectService=t,this.projectDataService=e,this.project$=this.projectService.getActiveProject(),this.pastBookings$=this.projectDataService.getBookings().pipe((0,s.U)(t=>t.filter(t=>!k(new Date(t.startDate))&&g(new Date(t.startDate)))),(0,s.U)(t=>t.slice(0,3))),this.todayBookings$=this.projectDataService.getBookings().pipe((0,s.U)(t=>t.filter(t=>k(new Date(t.startDate)))),(0,s.U)(t=>t.slice(0,3))),this.upcomingBookings$=this.projectDataService.getBookings().pipe((0,s.U)(t=>t.filter(t=>!k(new Date(t.startDate))&&function(t){return c(1,arguments),p(t).getTime()>Date.now()}(new Date(t.startDate)))),(0,s.U)(t=>t.slice(0,3)))}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(v),u.Y36(B))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-project-details"]],decls:10,vars:3,consts:[[1,"centered-content","padded-content"],[1,"mb-2"],["routerLink","../","cta","tertiary",1,"mr-3","inline-flex","align-center"],["key","back",1,"mr-1"],[4,"ngIf"],[1,"mb-1","h2"],[1,"flex"],[1,"mr-3"],["routerLink","itinerary","cta","tertiary",1,"align-center"],["key","itinerary","size","lg",1,"mr-1"],["routerLink","participants","cta","tertiary",1,"align-center"],["key","people",1,"mr-1"],["routerLink","sharing","cta","tertiary",1,"align-center"],["key","share-center",1,"mr-1"],[1,"card","mt-4"],[1,"mb-3","h4","flex","align-center"],[1,"mr-1"],["key","heartbeat","size","xl",1,"heartbeat-icon"],[1,"mb-3","flex","align-center"],[1,"h5","mr-2"],["class","ml-1",4,"ngFor","ngForOf"],[1,"ml-2"],[1,"mb-3","flex"],[1,"ml-1"],[3,"routerLink"]],template:function(t,e){1&t&&(u.TgZ(0,"main",0),u._UZ(1,"app-authenticated-header"),u.TgZ(2,"div",1),u.TgZ(3,"a",2),u.TgZ(4,"span"),u._UZ(5,"svg-icon",3),u.qZA(),u.TgZ(6,"span"),u._uU(7,"Back to projects"),u.qZA(),u.qZA(),u.qZA(),u.YNc(8,$,46,10,"div",4),u.ALo(9,"async"),u.qZA()),2&t&&(u.xp6(8),u.Q6J("ngIf",u.lcZ(9,1,e.project$)))},styles:[".heartbeat-icon[_ngcontent-%COMP%]{color:var(--secondary-color)}"]}),t})(),F=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-project-context"]],features:[u._Bn([B])],decls:1,vars:0,template:function(t,e){1&t&&u._UZ(0,"router-outlet")},directives:[i.lC],styles:[""]}),t})();var M=r(2167),G=r(8583),Q=r(2608);const J=[{path:"",component:F,children:[{path:"",component:j},{path:":projectId",pathMatch:"exact",component:L},{path:":projectId/itinerary",loadChildren:()=>Promise.all([r.e(592),r.e(438)]).then(r.bind(r,438)).then(t=>t.ItineraryModule)},{path:":projectId/participants",loadChildren:()=>Promise.all([r.e(592),r.e(850)]).then(r.bind(r,4850)).then(t=>t.ParticipantsModule)},{path:":projectId/sharing",loadChildren:()=>r.e(46).then(r.bind(r,4046)).then(t=>t.DataSharingModule)},{path:"**",redirectTo:""}]}];let Y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[a.m8,i.Bz.forChild(J),n.p],i.Bz]}),t})();u.B6R(j,[M.W,G.sg,i.yS],[G.Ov,G.uU]),u.B6R(L,[M.W,i.yS,Q.bk,G.O5,G.sg],[G.Ov])},2167:(t,e,r)=>{"use strict";r.d(e,{W:()=>u});var i=r(3342),a=r(8186),n=r(9645),o=r(5894),s=r(2863),c=r(2789);let p=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-logo"]],decls:5,vars:1,consts:[["routerLink","/",1,"block","flex","align-center"],[1,"logo-container",3,"inlineSVG"],[1,"flex","column","ml-1"],[1,"handwritten","h3"]],template:function(t,e){1&t&&(a.TgZ(0,"a",0),a._UZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"span",3),a._uU(4,"Travigliery"),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(1),a.Q6J("inlineSVG","/assets/logo.svg"))},directives:[s.yS,c.d$],styles:["[_nghost-%COMP%]{color:#fff}[_nghost-%COMP%]   .logo-container[_ngcontent-%COMP%]{width:35px}[_nghost-%COMP%]     svg{width:100%;height:100%}[_nghost-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:currentColor}"]}),t})();const g=["*"];let u=(()=>{class t{constructor(t,e){this.userService=t,this.appRouter=e}logout(){this.userService.logout().pipe((0,i.b)(()=>{this.appRouter.goToLogin()})).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(n.UserService),a.Y36(o.So))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-authenticated-header"]],ngContentSelectors:g,decls:7,vars:0,consts:[[1,"flex"],[1,"content-area"],[1,"default-area"],["cta","outlined",3,"click"]],template:function(t,e){1&t&&(a.F$t(),a.TgZ(0,"header",0),a._UZ(1,"app-logo"),a.TgZ(2,"div",1),a.Hsn(3),a.qZA(),a.TgZ(4,"div",2),a.TgZ(5,"button",3),a.NdJ("click",function(){return e.logout()}),a._uU(6,"Logout"),a.qZA(),a.qZA(),a.qZA())},directives:[p],styles:["[_nghost-%COMP%]{display:block;background-color:var(--primary-transparent-color);color:var(--text-color-on-background);padding:var(--space-2);border-radius:var(--space-3)}.content-area[_ngcontent-%COMP%]{flex-grow:1}.default-area[_ngcontent-%COMP%]{min-width:7em}"]}),t})()}}]);